<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Recipe</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body class="bg-body-tertiary ">
    <%- include('../partials/header.ejs') %>

    <div class="container py-5">
        
        <form class="needs-validation" novalidate="" id="form" method="post" action="/add">
            <input type="hidden" name="dishId" value="<%= locals.id %>" id="dish-id">
            <div class="row justify-content-center">

                <div class="col-md-7 col-lg-7 " bis_skin_checked="1">
                    <h4 class="mb-3">Recipe Information</h4>
                        <div class="row g-3" bis_skin_checked="1">
                            <div class="col-12">
                                <label for="image" class="form-label">Image</label>
                                <input class="form-control" type="file" id="image" accept="image/png, image/jpeg" name="image">
                            </div>
            
                            <div class="col-12" bis_skin_checked="1">
                                <label for="name" class="form-label">Name</label>
                                <input type="text" class="form-control" id="name"  name="name" value="<%= locals.name %>" required>
                                <div class="invalid-feedback" bis_skin_checked="1"> Please enter a name. </div>
                            </div>

                            <div class="col-12" bis_skin_checked="1">
                                <label for="category" class="form-label">Category</label>
                                <input type="text" class="form-control" id="category" name="category" value="<%= locals.category %>" required>
                                <div class="invalid-feedback" bis_skin_checked="1"> Please enter a category. </div>
                            </div>

                            <div class="col-12" bis_skin_checked="1">
                                <label for="intro" class="form-label">Intro</label>
                                <input type="text" class="form-control" id="intro" name="intro" value="<%= locals.intro %>" required>
                                <div class="invalid-feedback" bis_skin_checked="1"> Please enter a intro. </div>
                            </div>

                            <div class="form-group">
                                <label for="comment">Proccess</label>
                                <textarea class="form-control" rows="5" id="comment" placeholder="<%= locals.comment %>" name="comment" required></textarea>
                            </div>
                        </div>
                        <hr class="my-4">
                        <div class="d-flex">
                            <button id="submit" class="w-100 btn btn-dark btn-lg" type="submit">Save</button>
                            <% if (locals.id) { %>
                                <button id="delete-<%= id %>" class="delete btn btn-danger btn-lg mx-2" type="button">Delete</button>
                            <% } %>
                        </div>
                        
                </div>

                <div class="col-md-5 col-lg-3 order-md-last" bis_skin_checked="1">
                    <h4 class="d-flex justify-content-between align-items-center mb-3">
                        <span class="text-dark">Ingredients</span>
                    </h4>
                    <ul class="list-group mb-3" id="ingredients">
                        <% if (locals.ingredients) { %>
                            <% ingredients.forEach(ingredient => { %>
                                <li class="list-group-item d-flex justify-content-between lh-sm mb-2 rounded-2">
                                    <input name="ingredient" type="text" class="form-control border-none border-bottom rounded-0"  
                                        placeholder="Ingredient" 
                                        style="border-top:none !important; border-left: none !important; border-right: none !important;" value="<%= ingredient.ingredient %>" required>
                                    <div class="invalid-feedback"> Please enter an Ingredient.</div>
                                    <div>
                                        <button type="button" class="remove btn btn-danger rounded-2">-</button>
                                    </div>
                                </li>
                            <% }) %>
                        <% } %>
                        
                    </ul>
                    <button type="button" class="btn btn-dark rounded-2" id="add-btn">+</button>
                </div>
            </div>
        </form>
        
    </div>  
    
    <%- include('../partials/footer.ejs') %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="/js/main.js"></script>
</body>
</html>